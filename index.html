<!doctype html>

<h3>Telephone keypad</h3>

<input id="in" type="text" />
<p id="out"></p>

<script>
  const out = document.getElementById('out');

  document
    .getElementById('in')
    .addEventListener('keyup', async ({ target }) => {
      const { value } = target;

      if (value !== '' && !/^([0-9*#]+)$/.test(value)) {
        target.setCustomValidity('invalid');
        return;
      };
      target.setCustomValidity('');

      const res = await fetch(
        `/api.php?q=${encodeURIComponent(value)}`,
        {}
      ).then(res => res.text());
      out.innerHTML = res;
      console.log(res, '¯\\_(ツ)_/¯');
    });
</script>
